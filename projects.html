<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Projects — Abhishek P</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="theme-dark">
    <header class="nav">
      <div class="brand">Abhishek <span class="accent">P</span></div>

      <!-- Hamburger Icon -->
      <div class="hamburger" id="hamburgerBtn">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <nav id="navMenu" class="nav-links">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="projects.html">Projects</a>
        <a class="nav-link" href="skills.html">Skills</a>
        <a class="nav-link" href="contact.html">Contact</a>
      </nav>
    </header>

    <main class="container">
      <section class="content-card">
        <h1 class="heading-lg gold">Selected Projects</h1>
        <p class="lede">
          Fetched directly from my GitHub. Click any project for details.
        </p>

        <div id="projectsGrid" class="projects-grid">
          <!-- JS will populate project cards here -->
        </div>

        <div class="note">
          <small
            >Note: If a repo has no description, it will be shown with a short
            summary based on repo name.</small
          >
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>
        © <span id="year3"></span> Abhishek P —
        <a href="https://github.com/Abhishek35411" target="_blank">GitHub</a>
      </p>
    </footer>

    <script src="js/main.js"></script>
    <script>
      document.getElementById("year3").innerText = new Date().getFullYear();

      // Fetch top repos from GitHub
      (async function fetchRepos() {
        const username = "Abhishek35411";
        try {
          const res = await fetch(
            `https://api.github.com/users/${username}/repos?per_page=12&sort=updated`
          );
          if (!res.ok) throw new Error("GitHub rate or network error");
          const repos = await res.json();
          const grid = document.getElementById("projectsGrid");

          // pick 6 strongest repos visually (first 6 returned)
          repos.slice(0, 6).forEach((repo) => {
            const card = document.createElement("article");
            card.className = "project-card fancy";
            card.innerHTML = `
            <div class="proj-header">
              <h3>${repo.name}</h3>
              <div class="meta">
                <span class="lang">${repo.language || ""}</span>
                <span class="stars">★ ${repo.stargazers_count}</span>
              </div>
            </div>
            <p class="proj-desc">${
              repo.description ||
              "A focused project demonstrating engineering skills."
            }</p>
            <div class="proj-actions">
              <a href="${
                repo.html_url
              }" target="_blank" class="btn outline small">View Repo</a>
              ${
                repo.homepage
                  ? `<a href="${repo.homepage}" target="_blank" class="btn small">Live</a>`
                  : ""
              }
            </div>
          `;
            grid.appendChild(card);
          });

          if (repos.length === 0) {
            grid.innerHTML =
              "<p>No public repos found. Check GitHub username.</p>";
          }
        } catch (err) {
          document.getElementById("projectsGrid").innerHTML =
            "<p>Unable to fetch GitHub projects. Try again later.</p>";
          console.error(err);
        }
      })();
    </script>
  </body>
</html>
